---
title: "Game Mode & Game State êµ¬í˜„"
description: "ì í”„ë§µì˜ í•µì‹¬ ê²Œì„ ë¡œì§ê³¼ ìƒíƒœ ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬í˜„"
---

import { Callout, Steps, Tabs, FileTree } from 'nextra/components'
import { Code, Settings, Timer, Trophy } from 'lucide-react'
import { LinkCard } from '@/components/link-card'
import BlueprintExample_New from '@/components/blueprint-example-new'

# ğŸ“Š Game Mode & Game State êµ¬í˜„

<Callout type="info" emoji="ğŸ®">
Game ModeëŠ” ê²Œì„ì˜ ê·œì¹™ì„, Game StateëŠ” ê²Œì„ì˜ í˜„ì¬ ìƒíƒœë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
</Callout>

## 1. Game Mode (GM_JumpMap)

### í´ë˜ìŠ¤ ìƒì„±

<Steps>
### Blueprint í´ë˜ìŠ¤ ìƒì„±
1. Content Browserì—ì„œ ìš°í´ë¦­
2. **Blueprint Class** ì„ íƒ
3. **GameModeBase** ìƒì†
4. ì´ë¦„: `GM_JumpMap`

### í´ë” êµ¬ì¡° ì„¤ì •
```
Content/
â”œâ”€â”€ Blueprints/
â”‚   â”œâ”€â”€ GameMode/
â”‚   â”‚   â””â”€â”€ GM_JumpMap
â”‚   â””â”€â”€ GameState/
â”‚       â””â”€â”€ GS_JumpMap
```
</Steps>

### ë³€ìˆ˜ ì„¤ì •

<Tabs items={['Game Settings', 'References', 'Score Settings']}>
  <Tabs.Tab>
```cpp
// === Game Settings ===
TimeBonus: Float = 1000.0          // ì‹œê°„ ë³´ë„ˆìŠ¤ ê¸°ì¤€ì 
TimePenaltyRate: Float = 10.0      // ì´ˆë‹¹ ê°ì 
CompletionBonus: Integer = 5000    // ì™„ì£¼ ë³´ë„ˆìŠ¤
MaxTime: Float = 300.0              // ì œí•œ ì‹œê°„ (5ë¶„)
bIsGameActive: Boolean = False      // ê²Œì„ ì§„í–‰ ìƒíƒœ
```
  </Tabs.Tab>
  
  <Tabs.Tab>
```cpp
// === References ===
StartZone: BP_StartZone             // ì‹œì‘ ì§€ì  ì°¸ì¡°
EndZone: BP_EndZone                 // ë„ì°© ì§€ì  ì°¸ì¡°
GameStateRef: GS_JumpMap            // Game State ì°¸ì¡°
AllCoins: Array<BP_Coin>            // ëª¨ë“  ì½”ì¸ ëª©ë¡
CurrentPlayer: Character             // í˜„ì¬ í”Œë ˆì´ì–´
```
  </Tabs.Tab>
  
  <Tabs.Tab>
```cpp
// === Score Settings ===
CoinValue: Integer = 100            // ì½”ì¸ ì ìˆ˜
TimeMultiplier: Float = 2.0         // ì‹œê°„ ì ìˆ˜ ë°°ìœ¨
PerfectRunBonus: Integer = 10000    // í¼í™íŠ¸ ë³´ë„ˆìŠ¤
SpeedRunBonus: Integer = 5000       // ìŠ¤í”¼ë“œëŸ° ë³´ë„ˆìŠ¤ (60ì´ˆ ì´ë‚´)
```
  </Tabs.Tab>
</Tabs>

### Event Graph êµ¬í˜„

#### BeginPlay ì´ë²¤íŠ¸

```mermaid
graph LR
    A[Event BeginPlay] --> B[Super BeginPlay]
    B --> C[Get Game State]
    C --> D[Cast to GS_JumpMap]
    D --> E[Store Reference]
    E --> F[Find Start/End Zones]
    F --> G[Setup Zone Bindings]
    G --> H[Find All Coins]
    H --> I[Initialize UI]
```

<Callout type="default" emoji="ğŸ’¡">
**Blueprint êµ¬í˜„ ë°©ë²•**:
1. Event Graphì—ì„œ BeginPlay ë…¸ë“œ ì¶”ê°€
2. Get Game State ë…¸ë“œ ì—°ê²°
3. Cast to GS_JumpMapìœ¼ë¡œ íƒ€ì… ë³€í™˜
4. Get All Actors of Classë¡œ Zoneê³¼ Coin ì°¾ê¸°
5. Create Widgetìœ¼ë¡œ HUD ìƒì„±
</Callout>

#### StartGame í•¨ìˆ˜

<BlueprintExample_New
  title="StartGame Function"
  description="ê²Œì„ ì‹œì‘ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜"
  code={`Function: StartGame
â”œâ”€ Input: None
â”œâ”€ Output: None
â”‚
â””â”€ Logic:
    1. Set bIsGameActive = True
    2. Get Player State â†’ Reset Score
    3. Call GameState->StartTimer()
    4. Get Player Controller â†’ Set Input Mode Game Only
    5. Teleport Player to StartZone Location
    6. Play Sound 2D "GameStart"
    7. Update HUD â†’ Show "Game Started!"`}
  nodes={[
    { type: "event", label: "StartGame" },
    { type: "setter", label: "Set bIsGameActive" },
    { type: "function", label: "Reset Player Score" },
    { type: "function", label: "Start Timer" },
    { type: "function", label: "Set Input Mode" },
    { type: "function", label: "Teleport Player" },
    { type: "function", label: "Play Sound 2D" },
    { type: "function", label: "Update HUD" }
  ]}
/>

#### EndGame í•¨ìˆ˜

<BlueprintExample_New
  title="EndGame Function"
  description="ê²Œì„ ì¢…ë£Œ ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” í•¨ìˆ˜"
  code={`Function: EndGame
â”œâ”€ Input: bCompleted (Boolean)
â”œâ”€ Output: None
â”‚
â””â”€ Logic:
    1. Call GameState->StopTimer()
    2. Get Final Time from GameState
    3. Call CalculateFinalScore()
    4. Save Game Data
    5. Create Results Widget
    6. Add to Viewport
    7. Set bIsGameActive = False
    8. Play End Sound (Victory/Defeat)`}
  nodes={[
    { type: "function", label: "EndGame", color: "blue" },
    { type: "function", label: "Stop Timer" },
    { type: "getter", label: "Get Final Time" },
    { type: "function", label: "Calculate Final Score" },
    { type: "function", label: "Save Game Data" },
    { type: "function", label: "Create Widget" },
    { type: "function", label: "Add to Viewport" },
    { type: "setter", label: "Set bIsGameActive" },
    { type: "function", label: "Play Sound" }
  ]}
/>

#### CalculateFinalScore í•¨ìˆ˜

```cpp
Function CalculateFinalScore() -> Integer
{
    // ê¸°ë³¸ ì ìˆ˜ ê°€ì ¸ì˜¤ê¸°
    PlayerState = Get Player State(0)
    CoinScore = PlayerState->CurrentScore
    ElapsedTime = GameState->ElapsedTime
    
    // ì‹œê°„ ì ìˆ˜ ê³„ì‚°
    TimeRemaining = MaxTime - ElapsedTime
    TimeScore = TimeRemaining * TimePenaltyRate
    TimeScore = Max(0, TimeScore)  // ìŒìˆ˜ ë°©ì§€
    
    // ë³´ë„ˆìŠ¤ ê³„ì‚°
    Bonuses = 0
    
    // í¼í™íŠ¸ëŸ° ë³´ë„ˆìŠ¤ (ëª¨ë“  ì½”ì¸ ìˆ˜ì§‘)
    if (PlayerState->CoinsCollected == AllCoins.Length)
    {
        Bonuses += PerfectRunBonus
    }
    
    // ìŠ¤í”¼ë“œëŸ° ë³´ë„ˆìŠ¤ (60ì´ˆ ì´ë‚´)
    if (ElapsedTime < 60.0)
    {
        Bonuses += SpeedRunBonus
    }
    
    // ìµœì¢… ì ìˆ˜
    FinalScore = CoinScore + TimeScore + Bonuses
    
    return FinalScore
}
```

## 2. Game State (GS_JumpMap)

### ë³€ìˆ˜ ì„¤ì •

<Tabs items={['Timer Variables', 'Game Statistics', 'Replicated Variables']}>
  <Tabs.Tab>
```cpp
// === Timer Variables ===
ElapsedTime: Float = 0.0            // ê²½ê³¼ ì‹œê°„
BestTime: Float = 999.0             // ìµœê³  ê¸°ë¡
bIsTimerActive: Boolean = False     // íƒ€ì´ë¨¸ í™œì„± ìƒíƒœ
TimerHandle: FTimerHandle            // íƒ€ì´ë¨¸ í•¸ë“¤
UpdateFrequency: Float = 0.01        // ì—…ë°ì´íŠ¸ ì£¼ê¸° (100 FPS)
```
  </Tabs.Tab>
  
  <Tabs.Tab>
```cpp
// === Game Statistics ===
TotalCoins: Integer = 0             // ì „ì²´ ì½”ì¸ ìˆ˜
CoinsCollected: Integer = 0         // ìˆ˜ì§‘í•œ ì½”ì¸
PlayersInGame: Integer = 0          // í˜„ì¬ í”Œë ˆì´ì–´ ìˆ˜
CurrentCheckpoint: Integer = 0       // í˜„ì¬ ì²´í¬í¬ì¸íŠ¸
GamePhase: String = "Waiting"       // ê²Œì„ ë‹¨ê³„
```
  </Tabs.Tab>
  
  <Tabs.Tab>
```cpp
// === Replicated Variables ===
Rep_ElapsedTime: Float (Replicated)      // ë™ê¸°í™”ëœ ì‹œê°„
Rep_GamePhase: String (Replicated)       // ë™ê¸°í™”ëœ ê²Œì„ ë‹¨ê³„
Rep_LeaderboardData: Array (Replicated)  // ë¦¬ë”ë³´ë“œ ë°ì´í„°
```

<Callout type="warning" emoji="âš ï¸">
Replicated ë³€ìˆ˜ëŠ” ë©€í‹°í”Œë ˆì´ì–´ í™˜ê²½ì—ì„œ ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ì— ë™ê¸°í™”ë©ë‹ˆë‹¤.
Class Defaultsì—ì„œ Replication ì„¤ì •ì„ í™•ì¸í•˜ì„¸ìš”.
</Callout>
  </Tabs.Tab>
</Tabs>

### íƒ€ì´ë¨¸ ì‹œìŠ¤í…œ êµ¬í˜„

#### StartTimer í•¨ìˆ˜

```mermaid
graph TB
    A[StartTimer Called] --> B{Is Timer Active?}
    B -->|Yes| C[Return]
    B -->|No| D[Set bIsTimerActive = True]
    D --> E[Reset ElapsedTime = 0.0]
    E --> F[Set Timer by Event]
    F --> G[Event: UpdateTimer]
    G --> H[Interval: 0.01]
    H --> I[Looping: True]
    I --> J[Broadcast OnTimerStarted]
```

<BlueprintExample_New
  title="StartTimer Function"
  description="íƒ€ì´ë¨¸ë¥¼ ì‹œì‘í•˜ê³  ì´ˆê¸°í™”í•˜ëŠ” í•¨ìˆ˜"
  code={`Function: StartTimer
â”‚
â”œâ”€ Set bIsTimerActive = True
â”œâ”€ ElapsedTime = 0.0
â”œâ”€ Set Timer by Event
â”‚   â”œâ”€ Event: UpdateTimer
â”‚   â”œâ”€ Time: 0.01
â”‚   â””â”€ Looping: True
â””â”€ Event Dispatcher: OnTimerStarted (Broadcast)`}
  nodes={[
    { type: "function", label: "StartTimer", color: "blue" },
    { type: "setter", label: "Set bIsTimerActive" },
    { type: "setter", label: "Set ElapsedTime" },
    { type: "function", label: "Set Timer by Event" },
    { type: "event", label: "Event Dispatcher" }
  ]}
/>

#### UpdateTimer ì´ë²¤íŠ¸

<BlueprintExample_New
  title="UpdateTimer Event"
  description="ë§¤ í”„ë ˆì„ë§ˆë‹¤ íƒ€ì´ë¨¸ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ì´ë²¤íŠ¸"
  code={`Custom Event: UpdateTimer
â”‚
â”œâ”€ Branch: bIsTimerActive?
â”‚   â””â”€ False â†’ Return
â”‚
â”œâ”€ ElapsedTime += Delta Time (0.01)
â”‚
â”œâ”€ Call HUD->UpdateTimerDisplay(ElapsedTime)
â”‚
â”œâ”€ Branch: ElapsedTime > MaxTime?
â”‚   â””â”€ True â†’ Call GameMode->TimeOut()
â”‚
â””â”€ Update Replicated Time (if Multiplayer)
    â””â”€ Rep_ElapsedTime = ElapsedTime`}
  nodes={[
    { type: "event", label: "UpdateTimer", color: "red" },
    { type: "branch", label: "Is Timer Active?" },
    { type: "math", label: "Add Delta Time" },
    { type: "function", label: "Update Timer Display" },
    { type: "branch", label: "Check Time Limit" },
    { type: "setter", label: "Update Replicated Time" }
  ]}
/>

#### StopTimer í•¨ìˆ˜

```cpp
Function StopTimer() -> Float
{
    // íƒ€ì´ë¨¸ ë¹„í™œì„±í™”
    bIsTimerActive = False
    
    // íƒ€ì´ë¨¸ í•¸ë“¤ ì •ë¦¬
    Clear Timer by Handle(TimerHandle)
    
    // ìµœê³  ê¸°ë¡ ì²´í¬
    if (ElapsedTime < BestTime && ElapsedTime > 0)
    {
        BestTime = ElapsedTime
        SaveBestTime()  // ì €ì¥
        
        // ìƒˆ ê¸°ë¡ ì•Œë¦¼
        ShowNotification("New Record!")
    }
    
    // ìµœì¢… ì‹œê°„ ë°˜í™˜
    return ElapsedTime
}
```

### Helper í•¨ìˆ˜ë“¤

#### GetFormattedTime

```cpp
Function GetFormattedTime(Time: Float) -> String
{
    Minutes = Floor(Time / 60)
    Seconds = Floor(Time % 60)
    Milliseconds = Floor((Time * 100) % 100)
    
    // í¬ë§·íŒ…: "MM:SS.MS"
    return Format("{0:02}:{1:02}.{2:02}", 
                  Minutes, Seconds, Milliseconds)
}
```

#### ResetGameState

```cpp
Function ResetGameState()
{
    ElapsedTime = 0.0
    CoinsCollected = 0
    CurrentCheckpoint = 0
    GamePhase = "Waiting"
    bIsTimerActive = False
    
    // ëª¨ë“  ì½”ì¸ ë¦¬ì…‹
    for (Coin in AllCoins)
    {
        Coin->ResetCoin()
    }
}
```

## ğŸ® ì´ë²¤íŠ¸ ë””ìŠ¤íŒ¨ì²˜ ì„¤ì •

### Game Mode ì´ë²¤íŠ¸

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
  <div className="border rounded-lg p-4">
    <h4 className="font-bold mb-2">OnGameStarted</h4>
    <ul className="text-sm space-y-1">
      <li>â€¢ ê²Œì„ ì‹œì‘ ì‹œ í˜¸ì¶œ</li>
      <li>â€¢ UI ì—…ë°ì´íŠ¸ íŠ¸ë¦¬ê±°</li>
      <li>â€¢ ì‚¬ìš´ë“œ/ì´í™íŠ¸ ì¬ìƒ</li>
    </ul>
  </div>
  
  <div className="border rounded-lg p-4">
    <h4 className="font-bold mb-2">OnGameEnded</h4>
    <ul className="text-sm space-y-1">
      <li>â€¢ ê²Œì„ ì¢…ë£Œ ì‹œ í˜¸ì¶œ</li>
      <li>â€¢ íŒŒë¼ë¯¸í„°: bSuccess, FinalScore</li>
      <li>â€¢ ê²°ê³¼ í™”ë©´ í‘œì‹œ</li>
    </ul>
  </div>
</div>

### Game State ì´ë²¤íŠ¸

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
  <div className="border rounded-lg p-4">
    <h4 className="font-bold mb-2">OnTimerUpdated</h4>
    <ul className="text-sm space-y-1">
      <li>â€¢ ë§¤ í”„ë ˆì„ í˜¸ì¶œ (0.01ì´ˆ)</li>
      <li>â€¢ íŒŒë¼ë¯¸í„°: CurrentTime</li>
      <li>â€¢ HUD ì—…ë°ì´íŠ¸ìš©</li>
    </ul>
  </div>
  
  <div className="border rounded-lg p-4">
    <h4 className="font-bold mb-2">OnTimerStopped</h4>
    <ul className="text-sm space-y-1">
      <li>â€¢ íƒ€ì´ë¨¸ ì •ì§€ ì‹œ í˜¸ì¶œ</li>
      <li>â€¢ íŒŒë¼ë¯¸í„°: FinalTime</li>
      <li>â€¢ ê¸°ë¡ ì €ì¥ íŠ¸ë¦¬ê±°</li>
    </ul>
  </div>
</div>

## ğŸ“ êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

<Callout type="success" emoji="âœ…">
**Game Mode ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [ ] GM_JumpMap ë¸”ë£¨í”„ë¦°íŠ¸ ìƒì„±
- [ ] ëª¨ë“  ë³€ìˆ˜ ì¶”ê°€ ë° ê¸°ë³¸ê°’ ì„¤ì •
- [ ] BeginPlay ì´ë²¤íŠ¸ êµ¬í˜„
- [ ] StartGame í•¨ìˆ˜ êµ¬í˜„
- [ ] EndGame í•¨ìˆ˜ êµ¬í˜„
- [ ] CalculateFinalScore í•¨ìˆ˜ êµ¬í˜„
- [ ] ì´ë²¤íŠ¸ ë””ìŠ¤íŒ¨ì²˜ ì„¤ì •
</Callout>

<Callout type="success" emoji="âœ…">
**Game State ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [ ] GS_JumpMap ë¸”ë£¨í”„ë¦°íŠ¸ ìƒì„±
- [ ] íƒ€ì´ë¨¸ ë³€ìˆ˜ ì„¤ì •
- [ ] StartTimer í•¨ìˆ˜ êµ¬í˜„
- [ ] UpdateTimer ì´ë²¤íŠ¸ êµ¬í˜„
- [ ] StopTimer í•¨ìˆ˜ êµ¬í˜„
- [ ] GetFormattedTime í—¬í¼ í•¨ìˆ˜
- [ ] Replication ì„¤ì • (ë©€í‹°í”Œë ˆì´ì–´ìš©)
</Callout>

## ë‹¤ìŒ ë‹¨ê³„

Game Modeì™€ Game State êµ¬í˜„ì´ ì™„ë£Œë˜ë©´:

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
  <LinkCard
    title="Player Controller & Player State êµ¬í˜„"
    description="í”Œë ˆì´ì–´ ì œì–´ì™€ ê°œì¸ ìƒíƒœ ì¶”ì  ì‹œìŠ¤í…œ"
    href="/unreal/jumpmap/player-state"
  />
  <LinkCard
    title="ê²Œì„ ì•¡í„° êµ¬í˜„"
    description="Start Zone, End Zone, Coin ì•¡í„° êµ¬í˜„"
    href="/unreal/jumpmap/actors"
  />
</div>