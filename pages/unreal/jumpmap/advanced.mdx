---
title: "Save System & 추가 기능"
description: "게임 저장 시스템과 고급 기능 구현"
---

import { Callout, Steps, Tabs, Card, Cards } from 'nextra/components'
import { LinkCard } from '../../../components/LinkCard'

# 💾 Save System & 추가 기능

<Callout type="info" emoji="🎮">
게임 진행 상황 저장, 리더보드, 파워업 등 고급 기능을 구현합니다.
</Callout>

## 1. Save Game System

### Save Game 클래스 생성

<Steps>
### Blueprint 생성
1. Content Browser에서 우클릭
2. **Blueprint Class** → **SaveGame** 선택
3. 이름: `BP_JumpMapSave`
4. 폴더: `Content/Blueprints/SaveGame/`

### 저장할 데이터 구조 설계
SaveGame 클래스에 필요한 모든 변수 추가
</Steps>

### 변수 구조

<Tabs items={['Player Stats', 'Game Progress', 'Settings', 'Achievements']}>
  <Tabs.Tab>
```cpp
// === Player Statistics ===
BestTime: Float = 999.0              // 최고 기록 시간
HighScore: Integer = 0               // 최고 점수
TotalCoinsCollected: Integer = 0     // 총 수집 코인
TotalPlayTime: Float = 0.0           // 총 플레이 시간
GamesPlayed: Integer = 0             // 플레이 횟수
GamesWon: Integer = 0                // 승리 횟수

// === Level Records ===
LevelRecords: Map<String, LevelRecord>
├─ Key: Level Name
└─ Value: LevelRecord Struct
    ├─ BestTime: Float
    ├─ HighScore: Integer
    ├─ Stars: Integer (0-3)
    └─ Completed: Boolean
```
  </Tabs.Tab>
  
  <Tabs.Tab>
```cpp
// === Current Progress ===
CurrentLevel: String                  // 현재 레벨
LastCheckpoint: Integer = 0          // 마지막 체크포인트
CurrentScore: Integer = 0            // 현재 점수
CurrentCoins: Integer = 0            // 현재 코인
ElapsedTime: Float = 0.0            // 경과 시간

// === Unlocks ===
UnlockedLevels: Array<String>        // 잠금 해제된 레벨
UnlockedCharacters: Array<String>    // 잠금 해제된 캐릭터
UnlockedPowerUps: Array<String>      // 잠금 해제된 파워업
```
  </Tabs.Tab>
  
  <Tabs.Tab>
```cpp
// === Game Settings ===
MasterVolume: Float = 1.0            // 마스터 볼륨
MusicVolume: Float = 0.8             // 음악 볼륨
SFXVolume: Float = 1.0               // 효과음 볼륨

// === Controls ===
MouseSensitivity: Float = 1.0        // 마우스 감도
InvertYAxis: Boolean = False         // Y축 반전
ControlScheme: Integer = 0           // 컨트롤 방식

// === Graphics ===
GraphicsQuality: Integer = 2         // 그래픽 품질 (0-3)
ResolutionScale: Float = 1.0         // 해상도 스케일
VSyncEnabled: Boolean = True         // 수직 동기화
```
  </Tabs.Tab>
  
  <Tabs.Tab>
```cpp
// === Achievements ===
Achievements: Array<AchievementData>
├─ AchievementID: String
├─ Unlocked: Boolean
├─ UnlockDate: DateTime
└─ Progress: Float

// === Statistics for Achievements ===
TotalJumps: Integer = 0              // 총 점프 횟수
TotalDeaths: Integer = 0             // 총 사망 횟수
PerfectRuns: Integer = 0             // 퍼펙트 런 횟수
ConsecutiveWins: Integer = 0         // 연속 승리
```
  </Tabs.Tab>
</Tabs>

### Save/Load 함수 구현

#### SaveGameData 함수

<div className="bg-gray-900 rounded-lg p-4 mt-4">
```blueprint
Function: SaveGameData
├─ Input: None
├─ Output: Success (Boolean)
│
└─ Logic:
    1. Does Save Game Exist? (Slot: "JumpMapSave")
       ├─ Yes → Load Game from Slot
       └─ No → Create Save Game Object (BP_JumpMapSave)
    
    2. Update Save Data
       ├─ Get Current Game State
       ├─ Get Player State
       ├─ Update Statistics
       └─ Update Progress
    
    3. Save to Slot
       ├─ Save Game to Slot ("JumpMapSave")
       ├─ User Index: 0
       └─ Return Success
    
    4. Show Notification
       └─ "Game Saved!"
```
</div>

#### LoadGameData 함수

```cpp
Function LoadGameData() -> Boolean
{
    // 1. 저장 파일 확인
    if (Does Save Game Exist("JumpMapSave"))
    {
        // 2. 파일 로드
        SaveGameObject = Load Game from Slot("JumpMapSave", 0)
        
        // 3. 타입 변환
        JumpMapSave = Cast to BP_JumpMapSave(SaveGameObject)
        
        if (IsValid(JumpMapSave))
        {
            // 4. 데이터 적용
            ApplyLoadedData(JumpMapSave)
            
            // 5. UI 업데이트
            UpdateAllUI()
            
            return True
        }
    }
    
    // 6. 새 게임 시작
    CreateNewSave()
    return False
}
```

#### Auto-Save 시스템

```cpp
Function SetupAutoSave()
{
    // 자동 저장 타이머 설정
    Set Timer by Function Name
    ├─ Function: AutoSave
    ├─ Time: 30.0  // 30초마다
    └─ Looping: True
}

Function AutoSave()
{
    // 게임 진행 중일 때만 저장
    if (GameMode->bIsGameActive)
    {
        SaveGameData()
        
        // 시각적 피드백 (작은 아이콘)
        ShowSaveIcon(2.0)  // 2초간 표시
    }
}
```

## 2. Leaderboard System

### 리더보드 데이터 구조

```cpp
// Leaderboard Entry Struct
Structure: FLeaderboardEntry
{
    PlayerName: String
    Score: Integer
    Time: Float
    Date: DateTime
    LevelName: String
    Rank: Integer
}

// Leaderboard Manager
Class: BP_LeaderboardManager
{
    LocalLeaderboard: Array<FLeaderboardEntry>
    MaxEntries: Integer = 100
    
    // 온라인 리더보드 (선택)
    OnlineLeaderboard: Array<FLeaderboardEntry>
}
```

### 리더보드 함수

#### AddLeaderboardEntry

```cpp
Function AddLeaderboardEntry(Entry: FLeaderboardEntry)
{
    // 1. 로컬 리더보드에 추가
    LocalLeaderboard.Add(Entry)
    
    // 2. 점수 기준 정렬
    LocalLeaderboard.Sort((A, B) => B.Score - A.Score)
    
    // 3. 최대 개수 제한
    if (LocalLeaderboard.Length > MaxEntries)
    {
        LocalLeaderboard.RemoveAt(MaxEntries)
    }
    
    // 4. 순위 업데이트
    for (i = 0; i < LocalLeaderboard.Length; i++)
    {
        LocalLeaderboard[i].Rank = i + 1
    }
    
    // 5. 저장
    SaveLeaderboard()
}
```

### 리더보드 UI (WBP_Leaderboard)

<div className="bg-gray-900 rounded-lg p-4 mt-4">
```xml
[Canvas Panel]
└─ [Vertical Box] - Main Container
    ├─ [Text] - Title "LEADERBOARD"
    │
    ├─ [Horizontal Box] - Header
    │   ├─ "Rank"
    │   ├─ "Name"
    │   ├─ "Score"
    │   └─ "Time"
    │
    ├─ [Scroll Box] - Entries Container
    │   └─ [List View] - LeaderboardList
    │       └─ Item Widget: WBP_LeaderboardEntry
    │
    └─ [Button] - Back Button
```
</div>

## 3. Power-Up System

### 파워업 베이스 클래스

```cpp
// BP_PowerUpBase (Actor)
Components:
├─ StaticMesh (파워업 모델)
├─ SphereCollision (트리거)
├─ RotatingMovement
└─ ParticleSystem (이펙트)

Variables:
├─ PowerUpType: Enum
├─ Duration: Float = 30.0
├─ EffectMultiplier: Float = 2.0
└─ bIsActive: Boolean = False
```

### 파워업 종류

<Tabs items={['Score Multiplier', 'Time Freeze', 'Magnet', 'Speed Boost']}>
  <Tabs.Tab>
```cpp
// BP_PowerUp_ScoreMultiplier
Class Variables:
├─ Multiplier: Float = 2.0
├─ Duration: Float = 30.0

On Activation:
{
    PlayerState->ScoreMultiplier = Multiplier
    
    // UI 표시
    HUD->ShowPowerUpIcon("2X Score", Duration)
    
    // 타이머 설정
    Set Timer (Duration) → Deactivate
}

On Deactivation:
{
    PlayerState->ScoreMultiplier = 1.0
    HUD->HidePowerUpIcon("2X Score")
}
```
  </Tabs.Tab>
  
  <Tabs.Tab>
```cpp
// BP_PowerUp_TimeFreezer
Class Variables:
├─ FreezeAmount: Float = 0.5  // 50% 속도
├─ Duration: Float = 10.0

On Activation:
{
    // 타이머 속도 감소
    GameState->TimerSpeed = FreezeAmount
    
    // 시각 효과
    PostProcess->ChromaticAberration = 2.0
    PostProcess->ColorTint = Blue
    
    // 사운드 효과
    Play Sound (TimeSlowSound)
}
```
  </Tabs.Tab>
  
  <Tabs.Tab>
```cpp
// BP_PowerUp_CoinMagnet
Class Variables:
├─ MagnetRadius: Float = 500.0
├─ MagnetForce: Float = 1000.0
├─ Duration: Float = 20.0

Tick Event (While Active):
{
    // 범위 내 모든 코인 찾기
    GetAllActorsOfClass(BP_Coin, Coins)
    
    for (Coin in Coins)
    {
        Distance = GetDistanceTo(Coin)
        if (Distance < MagnetRadius)
        {
            // 플레이어 방향으로 끌어당기기
            Direction = (Player - Coin).Normalize()
            Coin->AddForce(Direction * MagnetForce)
        }
    }
}
```
  </Tabs.Tab>
  
  <Tabs.Tab>
```cpp
// BP_PowerUp_SpeedBoost
Class Variables:
├─ SpeedMultiplier: Float = 1.5
├─ JumpMultiplier: Float = 1.3
├─ Duration: Float = 15.0

On Activation:
{
    // 캐릭터 이동 속도 증가
    Character->MaxWalkSpeed *= SpeedMultiplier
    Character->JumpZVelocity *= JumpMultiplier
    
    // 이펙트
    Spawn Attached ParticleSystem(SpeedTrail)
    
    // FOV 변경
    Camera->FieldOfView = 100  // 기본 90
}
```
  </Tabs.Tab>
</Tabs>

## 4. Difficulty System

### 난이도 설정

```cpp
Enum: EDifficulty
{
    Easy,
    Normal,
    Hard,
    Expert
}

Structure: FDifficultySettings
{
    // 시간 설정
    MaxTime: Float
    TimePenaltyRate: Float
    
    // 점수 설정
    CoinValue: Integer
    ScoreMultiplier: Float
    
    // 게임플레이
    PlayerSpeed: Float
    JumpHeight: Float
    NumberOfCheckpoints: Integer
    
    // 적/장애물
    EnemySpeed: Float
    ObstacleDamage: Integer
}
```

### 난이도별 설정값

<div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">
  <div className="border rounded-lg p-4">
    <h4 className="font-bold mb-2">Easy</h4>
    <ul className="text-sm">
      <li>시간: 10분</li>
      <li>코인: 150점</li>
      <li>속도: 1.2x</li>
      <li>체크포인트: 많음</li>
    </ul>
  </div>
  
  <div className="border rounded-lg p-4">
    <h4 className="font-bold mb-2">Normal</h4>
    <ul className="text-sm">
      <li>시간: 5분</li>
      <li>코인: 100점</li>
      <li>속도: 1.0x</li>
      <li>체크포인트: 보통</li>
    </ul>
  </div>
  
  <div className="border rounded-lg p-4">
    <h4 className="font-bold mb-2">Hard</h4>
    <ul className="text-sm">
      <li>시간: 3분</li>
      <li>코인: 50점</li>
      <li>속도: 0.8x</li>
      <li>체크포인트: 적음</li>
    </ul>
  </div>
  
  <div className="border rounded-lg p-4">
    <h4 className="font-bold mb-2">Expert</h4>
    <ul className="text-sm">
      <li>시간: 2분</li>
      <li>코인: 25점</li>
      <li>속도: 0.6x</li>
      <li>체크포인트: 없음</li>
    </ul>
  </div>
</div>

## 5. Achievement System

### 업적 정의

```cpp
Structure: FAchievement
{
    ID: String
    Name: String
    Description: String
    Icon: Texture2D
    Points: Integer
    
    // 조건
    RequiredValue: Float
    CurrentValue: Float
    bIsUnlocked: Boolean
    
    // 타입
    Type: Enum (Cumulative, Single, Secret)
}
```

### 업적 예시

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
  <div className="border rounded-lg p-4">
    <h4 className="font-bold mb-2">🏃 Speed Runner</h4>
    <p className="text-sm">60초 이내 완주</p>
    <p className="text-xs text-gray-500">보상: 1000점</p>
  </div>
  
  <div className="border rounded-lg p-4">
    <h4 className="font-bold mb-2">💰 Coin Collector</h4>
    <p className="text-sm">모든 코인 수집</p>
    <p className="text-xs text-gray-500">보상: 500점</p>
  </div>
  
  <div className="border rounded-lg p-4">
    <h4 className="font-bold mb-2">🎯 Perfect Run</h4>
    <p className="text-sm">죽지 않고 완주</p>
    <p className="text-xs text-gray-500">보상: 2000점</p>
  </div>
  
  <div className="border rounded-lg p-4">
    <h4 className="font-bold mb-2">🏆 Master</h4>
    <p className="text-sm">모든 레벨 S등급</p>
    <p className="text-xs text-gray-500">보상: 5000점</p>
  </div>
</div>

### 업적 체크 시스템

```cpp
Function CheckAchievements()
{
    for (Achievement in Achievements)
    {
        if (!Achievement.bIsUnlocked)
        {
            switch (Achievement.Type)
            {
                case SpeedRun:
                    if (GameState->ElapsedTime < 60.0)
                        UnlockAchievement(Achievement)
                    break
                    
                case CoinCollector:
                    if (PlayerState->CoinsCollected >= TotalCoins)
                        UnlockAchievement(Achievement)
                    break
                    
                case PerfectRun:
                    if (PlayerState->Deaths == 0)
                        UnlockAchievement(Achievement)
                    break
            }
        }
    }
}

Function UnlockAchievement(Achievement: FAchievement)
{
    Achievement.bIsUnlocked = True
    Achievement.UnlockDate = Now()
    
    // 알림 표시
    ShowAchievementNotification(Achievement)
    
    // 점수 추가
    PlayerState->AddScore(Achievement.Points)
    
    // 저장
    SaveGameData()
}
```

## 6. Settings Menu

### 설정 UI (WBP_Settings)

```xml
[Tab Box] - Settings Categories
├─ [Tab] - Gameplay
│   ├─ Difficulty Selector
│   ├─ Control Scheme
│   └─ Tutorial Toggle
│
├─ [Tab] - Audio
│   ├─ Master Volume Slider
│   ├─ Music Volume Slider
│   └─ SFX Volume Slider
│
├─ [Tab] - Video
│   ├─ Resolution Dropdown
│   ├─ Graphics Quality
│   └─ VSync Toggle
│
└─ [Tab] - Controls
    ├─ Key Bindings List
    ├─ Mouse Sensitivity
    └─ Invert Y-Axis
```

## 7. Game Mode Selection

### 게임 모드 종류

<Cards>
  <Card title="🏆 Classic Mode">
    기본 점프맵 게임플레이
  </Card>
  <Card title="⚡ Time Attack">
    시간 제한 속도 도전
  </Card>
  <Card title="⚙️ Survival Mode">
    끝없는 도전, 점진적 난이도
  </Card>
  <Card title="💾 Multiplayer Race">
    실시간 멀티플레이어 경쟁
  </Card>
</Cards>

## 📝 구현 체크리스트

<Callout type="success" emoji="✅">
**Save System 체크리스트**:
- [ ] BP_JumpMapSave 클래스 생성
- [ ] Save/Load 함수 구현
- [ ] Auto-Save 시스템
- [ ] 설정 저장/로드
</Callout>

<Callout type="success" emoji="✅">
**추가 기능 체크리스트**:
- [ ] 리더보드 시스템
- [ ] 파워업 시스템
- [ ] 난이도 설정
- [ ] 업적 시스템
- [ ] 설정 메뉴
- [ ] 게임 모드 선택
</Callout>

## 🎮 최종 통합

모든 시스템이 구현되면:

1. **전체 테스트**: 모든 기능이 올바르게 작동하는지 확인
2. **밸런싱**: 난이도와 점수 시스템 조정
3. **최적화**: 성능 프로파일링 및 개선
4. **폴리싱**: 시각/청각 효과 개선
5. **배포 준비**: 빌드 설정 및 패키징

<Callout type="success" emoji="🎉">
축하합니다! 완전한 점프맵 게임 시스템 구현이 완료되었습니다!
</Callout>