import { Callout, Steps, Tabs, Code } from 'nextra/components'
import dynamic from 'next/dynamic'

export const TeleportPortalBlueprint = dynamic(
  () => import('../../../components/UE5BlueprintExamples').then(mod => ({ default: mod.TeleportPortalBlueprint })),
  { ssr: false }
)

export const PortalOverlapBlueprint = dynamic(
  () => import('../../../components/UE5BlueprintExamples').then(mod => ({ default: mod.PortalOverlapBlueprint })),
  { ssr: false }
)

# í…”ë ˆí¬íŠ¸ í¬í„¸ êµ¬í˜„í•˜ê¸°

<Callout type="info" emoji="ğŸŒ€">
  ì´ ê°€ì´ë“œì—ì„œëŠ” í”Œë ˆì´ì–´ë¥¼ ë‹¤ë¥¸ ìœ„ì¹˜ë¡œ ìˆœê°„ì´ë™ì‹œí‚¤ëŠ” í¬í„¸ ì‹œìŠ¤í…œì„ ë§Œë“­ë‹ˆë‹¤.
  ì–‘ë°©í–¥ í¬í„¸, ì‹œê° íš¨ê³¼, ê·¸ë¦¬ê³  ì†ë„ ìœ ì§€ ì˜µì…˜ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
</Callout>

## í•™ìŠµ ëª©í‘œ

- ì–‘ë°©í–¥ í¬í„¸ ì‹œìŠ¤í…œ êµ¬ì¶•
- í…”ë ˆí¬íŠ¸ ë¡œì§ ë° ì¿¨ë‹¤ìš´ êµ¬í˜„
- í¬í„¸ ë·° ë Œë”ë§ (ê³ ê¸‰)
- ì†ë„ ë° íšŒì „ ìœ ì§€ ì˜µì…˜

## ë¸”ë£¨í”„ë¦°íŠ¸ ìƒì„±

<Steps>
### ìƒˆ ì•¡í„° ë¸”ë£¨í”„ë¦°íŠ¸ ë§Œë“¤ê¸°

1. Content Browserì—ì„œ ìš°í´ë¦­
2. **Blueprint Class** ì„ íƒ
3. **Actor** í´ë˜ìŠ¤ ì„ íƒ
4. ì´ë¦„ì„ `BP_TeleportPortal`ë¡œ ì§€ì •

### í´ë” êµ¬ì¡° ì •ë¦¬

```plaintext
Content/
â””â”€â”€ Blueprints/
    â””â”€â”€ Portals/
        â”œâ”€â”€ BP_TeleportPortal
        â””â”€â”€ BP_TeleportPortal_Exit
```
</Steps>

## ì»´í¬ë„ŒíŠ¸ ì„¤ì •

### í¬í„¸ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```plaintext
BP_TeleportPortal (Actor)
â”œâ”€â”€ DefaultSceneRoot
â”œâ”€â”€ StaticMesh (í¬í„¸ í”„ë ˆì„)
â”‚   â””â”€â”€ Mobility: Static
â”œâ”€â”€ CapsuleComponent (íŠ¸ë¦¬ê±° ì˜ì—­)
â”‚   â””â”€â”€ Radius: 60, Half Height: 100
â”œâ”€â”€ StaticMesh (í¬í„¸ í‘œë©´)
â”‚   â””â”€â”€ Material: M_Portal
â”œâ”€â”€ ArrowComponent (í…”ë ˆí¬íŠ¸ ë°©í–¥)
â”‚   â””â”€â”€ Relative Rotation: (0, 0, 0)
â”œâ”€â”€ ParticleSystem (í¬í„¸ íš¨ê³¼)
â”‚   â””â”€â”€ Template: P_Portal_Active
â””â”€â”€ AudioComponent (ì•°ë¹„ì–¸íŠ¸ ì‚¬ìš´ë“œ)
    â””â”€â”€ Sound: S_Portal_Ambient
```

### ì»´í¬ë„ŒíŠ¸ ì¶”ê°€í•˜ê¸°

<Tabs items={['í¬í„¸ í”„ë ˆì„', 'íŠ¸ë¦¬ê±° ì˜ì—­', 'íš¨ê³¼ ì»´í¬ë„ŒíŠ¸']}>
  <Tabs.Tab>
    **í¬í„¸ í”„ë ˆì„ ì„¤ì •**
    
    1. **Add Component** â†’ **Static Mesh** ì„ íƒ
    2. ì´ë¦„: `PortalFrame`
    3. Details íŒ¨ë„ì—ì„œ:
       - **Static Mesh**: í¬í„¸ í”„ë ˆì„ ë©”ì‹œ ì„ íƒ
       - **Material**: ì›í•˜ëŠ” ë¨¸í‹°ë¦¬ì–¼
       - **Scale**: í¬ê¸° ì¡°ì •
    
    4. ë‘ ë²ˆì§¸ **Static Mesh** ì¶”ê°€
    5. ì´ë¦„: `PortalSurface`
    6. í¬í„¸ ë‚´ë¶€ í‘œë©´ìš© ë©”ì‹œ ì„¤ì •
  </Tabs.Tab>
  
  <Tabs.Tab>
    **Capsule Collision ì„¤ì •**
    
    1. **Add Component** â†’ **Capsule Collision** ì„ íƒ
    2. Details íŒ¨ë„ì—ì„œ ì„¤ì •:
       - **Capsule Radius**: `60`
       - **Capsule Half Height**: `100`
       - **Collision Presets**: `OverlapAllDynamic`
       - **Generate Overlap Events**: âœ… ì²´í¬
    
    <Callout type="warning">
      íŠ¸ë¦¬ê±° ì˜ì—­ì´ í¬í„¸ í‘œë©´ë³´ë‹¤ ì•½ê°„ ì•ì— ìœ„ì¹˜í•˜ë„ë¡ ì¡°ì •í•˜ì„¸ìš”.
    </Callout>
  </Tabs.Tab>
  
  <Tabs.Tab>
    **íš¨ê³¼ ì»´í¬ë„ŒíŠ¸ ì„¤ì •**
    
    **Particle System**
    1. **Add Component** â†’ **Particle System**
    2. ì´ë¦„: `PortalEffect`
    3. Template: í¬í„¸ ì´í™íŠ¸ ì„ íƒ
    4. Auto Activate: âœ…
    
    **Audio Component**
    1. **Add Component** â†’ **Audio**
    2. ì´ë¦„: `AmbientSound`
    3. Sound: í¬í„¸ ì•°ë¹„ì–¸íŠ¸ ì‚¬ìš´ë“œ
    4. Auto Activate: âœ…
    5. Attenuation Settings ì„¤ì •
    
    **Arrow Component**
    1. **Add Component** â†’ **Arrow**
    2. ì´ë¦„: `ExitDirection`
    3. í…”ë ˆí¬íŠ¸ í›„ ë°©í–¥ í‘œì‹œ
  </Tabs.Tab>
</Tabs>

## ë³€ìˆ˜ ì„¤ì •

### í•„ìˆ˜ ë³€ìˆ˜ ëª©ë¡

| ë³€ìˆ˜ëª… | íƒ€ì… | ê¸°ë³¸ê°’ | ì„¤ëª… |
|--------|------|--------|------|
| `LinkedPortal` | BP_TeleportPortal | None | ì—°ê²°ëœ í¬í„¸ |
| `TeleportOffset` | Vector | (0,0,100) | í…”ë ˆí¬íŠ¸ ìœ„ì¹˜ ì˜¤í”„ì…‹ |
| `bMaintainVelocity` | Boolean | True | ì†ë„ ìœ ì§€ ì—¬ë¶€ |
| `bMaintainRotation` | Boolean | False | íšŒì „ ìœ ì§€ ì—¬ë¶€ |
| `CooldownTime` | Float | 1.0 | ì¬ì‚¬ìš© ëŒ€ê¸°ì‹œê°„ |
| `RecentlyTeleported` | `Array<Character>` | Empty | ìµœê·¼ í…”ë ˆí¬íŠ¸ëœ ìºë¦­í„° |
| `PortalColor` | LinearColor | Blue | í¬í„¸ ìƒ‰ìƒ |
| `bIsActive` | Boolean | True | í™œì„±í™” ìƒíƒœ |
| `TeleportDelay` | Float | 0.1 | í…”ë ˆí¬íŠ¸ ì§€ì—°ì‹œê°„ |

### ë³€ìˆ˜ ì¹´í…Œê³ ë¦¬ ì •ë¦¬

- **Portal Settings**: LinkedPortal, TeleportOffset, PortalColor
- **Teleport Options**: bMaintainVelocity, bMaintainRotation, TeleportDelay
- **Cooldown**: CooldownTime, RecentlyTeleported
- **Runtime**: bIsActive

## ì´ë²¤íŠ¸ ê·¸ë˜í”„ êµ¬í˜„

### BeginPlay - ì´ˆê¸°í™”

<TeleportPortalBlueprint />

### Overlap ì´ë²¤íŠ¸ - í…”ë ˆí¬íŠ¸ ì²˜ë¦¬

<PortalOverlapBlueprint />

### í…”ë ˆí¬íŠ¸ ë¡œì§ ìƒì„¸

<Tabs items={['í…”ë ˆí¬íŠ¸ ì¡°ê±´ í™•ì¸', 'ìœ„ì¹˜ ê³„ì‚°', 'íš¨ê³¼ ì¬ìƒ']}>
  <Tabs.Tab>
    **í…”ë ˆí¬íŠ¸ ì¡°ê±´ í™•ì¸**
    
    ```plaintext
    Check Teleport Conditions
    â”œâ”€â”€ Cast to Character
    â”œâ”€â”€ Check if LinkedPortal is Valid
    â”œâ”€â”€ Check if Character NOT in RecentlyTeleported
    â””â”€â”€ Check if Portal is Active
    ```
    
    ëª¨ë“  ì¡°ê±´ì´ ì¶©ì¡±ë˜ì–´ì•¼ í…”ë ˆí¬íŠ¸ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.
  </Tabs.Tab>
  
  <Tabs.Tab>
    **í…”ë ˆí¬íŠ¸ ìœ„ì¹˜ ê³„ì‚°**
    
    ```plaintext
    Calculate Teleport Transform
    â”œâ”€â”€ Get Linked Portal Transform
    â”œâ”€â”€ Get Exit Direction from Arrow
    â”œâ”€â”€ Add TeleportOffset
    â”œâ”€â”€ Calculate Relative Rotation
    â”‚   â”œâ”€â”€ Get Character Rotation
    â”‚   â”œâ”€â”€ Get Portal Rotation Difference
    â”‚   â””â”€â”€ Apply Rotation (if bMaintainRotation)
    â””â”€â”€ Return: Final Transform
    ```
  </Tabs.Tab>
  
  <Tabs.Tab>
    **í…”ë ˆí¬íŠ¸ íš¨ê³¼**
    
    ì…êµ¬ íš¨ê³¼:
    - Spawn Emitter at Location (ì…êµ¬)
    - Play Sound at Location
    - Camera Fade (ì˜µì…˜)
    
    ì¶œêµ¬ íš¨ê³¼:
    - Spawn Emitter at Location (ì¶œêµ¬)
    - Play Sound at Location
    - Camera Shake (ì˜µì…˜)
  </Tabs.Tab>
</Tabs>

## ê³ ê¸‰ ê¸°ëŠ¥

### í¬í„¸ ë·° ë Œë”ë§ (Scene Capture)

<Callout type="tip" emoji="ğŸ¥">
  Scene Capture 2Dë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ë¥¸ í¬í„¸ì˜ ë·°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë Œë”ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
</Callout>

<Steps>
### Render Target ìƒì„±

1. Content Browserì—ì„œ ìš°í´ë¦­
2. **Materials & Textures** â†’ **Render Target**
3. ì´ë¦„: `RT_PortalView`
4. í•´ìƒë„: 1024x1024

### Scene Capture Component ì¶”ê°€

1. **Add Component** â†’ **Scene Capture 2D**
2. ì´ë¦„: `PortalCamera`
3. Texture Target: `RT_PortalView`
4. Capture Source: Final Color (LDR)

### Material ì„¤ì •

1. ìƒˆ Material ìƒì„±: `M_Portal`
2. Emissiveì— Render Target ì—°ê²°
3. Portal Surface ë©”ì‹œì— ì ìš©

### ì¹´ë©”ë¼ ìœ„ì¹˜ ì—…ë°ì´íŠ¸

```plaintext
Event Tick (ì˜µì…˜)
â”œâ”€â”€ Get Player Camera Location
â”œâ”€â”€ Calculate Relative Position to This Portal
â”œâ”€â”€ Apply to Linked Portal Camera
â””â”€â”€ Update Scene Capture
```
</Steps>

### ì†ë„ ìœ ì§€ ë° ë³€í™˜

```plaintext
Maintain Velocity
â”œâ”€â”€ Get Character Movement Component
â”œâ”€â”€ Get Velocity
â”œâ”€â”€ Transform Vector (Portal Space)
â”‚   â”œâ”€â”€ World to Local (Entry Portal)
â”‚   â””â”€â”€ Local to World (Exit Portal)
â”œâ”€â”€ Launch Character
â”‚   â””â”€â”€ Launch Velocity: Transformed Velocity
```

### ì–‘ë°©í–¥ í¬í„¸ ì„¤ì •

<Callout type="warning" emoji="âš ï¸">
  ì–‘ë°©í–¥ í¬í„¸ì„ ì„¤ì •í•  ë•ŒëŠ” ë°˜ë“œì‹œ ì–‘ìª½ í¬í„¸ì˜ LinkedPortalì„ ì„œë¡œ ì—°ê²°í•´ì•¼ í•©ë‹ˆë‹¤.
</Callout>

<Steps>
### í¬í„¸ ìŒ ë§Œë“¤ê¸°

1. `BP_TeleportPortal`ì„ ë ˆë²¨ì— 2ê°œ ë°°ì¹˜
2. ì²« ë²ˆì§¸ í¬í„¸ ì„ íƒ
3. Details â†’ **Portal Settings** â†’ **Linked Portal**
4. ë‘ ë²ˆì§¸ í¬í„¸ ì„ íƒ
5. ë°˜ëŒ€ë¡œë„ ì„¤ì •

### ìƒ‰ìƒ êµ¬ë¶„

ê° í¬í„¸ ìŒì— ë‹¤ë¥¸ ìƒ‰ìƒ ì„¤ì •:
- íŒŒë€ìƒ‰/ì£¼í™©ìƒ‰
- ì´ˆë¡ìƒ‰/ë¹¨ê°„ìƒ‰
- ë³´ë¼ìƒ‰/ë…¸ë€ìƒ‰
</Steps>

## ì¿¨ë‹¤ìš´ ì‹œìŠ¤í…œ

### RecentlyTeleported ë°°ì—´ ê´€ë¦¬

```plaintext
After Teleport
â”œâ”€â”€ Add Character to RecentlyTeleported (This Portal)
â”œâ”€â”€ Add Character to LinkedPortal.RecentlyTeleported
â”œâ”€â”€ Set Timer by Function Name
â”‚   â”œâ”€â”€ Function: RemoveFromCooldown
â”‚   â”œâ”€â”€ Time: CooldownTime
â”‚   â””â”€â”€ Input: Character Reference
```

### RemoveFromCooldown í•¨ìˆ˜

```plaintext
Function RemoveFromCooldown
â”œâ”€â”€ Input: Character
â”œâ”€â”€ Remove from RecentlyTeleported Array
â”œâ”€â”€ Remove from LinkedPortal.RecentlyTeleported
â””â”€â”€ Optional: Play Ready Effect
```

## ì„±ëŠ¥ ìµœì í™”

### ìµœì í™” íŒ

- **Scene Capture ìµœì í™”**:
  - ë‚®ì€ í•´ìƒë„ ì‚¬ìš© (512x512)
  - Update Rate ì œí•œ
  - í”Œë ˆì´ì–´ ê·¼ì²˜ì—ì„œë§Œ í™œì„±í™”

- **íš¨ê³¼ ìµœì í™”**:
  - íŒŒí‹°í´ LOD ì„¤ì •
  - ì‚¬ìš´ë“œ ê±°ë¦¬ ê°ì‡ 
  - ë¶ˆí•„ìš”í•œ Tick ì´ë²¤íŠ¸ ì œê±°

### ë„¤íŠ¸ì›Œí¬ ë¦¬í”Œë¦¬ì¼€ì´ì…˜

ë©€í‹°í”Œë ˆì´ì–´ ê²Œì„ì˜ ê²½ìš°:
- `LinkedPortal` ë³€ìˆ˜ Replicated ì„¤ì •
- RPCë¡œ í…”ë ˆí¬íŠ¸ ì´ë²¤íŠ¸ ì „ì†¡
- ì„œë²„ì—ì„œë§Œ í…”ë ˆí¬íŠ¸ ë¡œì§ ì‹¤í–‰

## ë¬¸ì œ í•´ê²°

### ë¬´í•œ í…”ë ˆí¬íŠ¸ ë°œìƒ

1. `RecentlyTeleported` ë°°ì—´ í™•ì¸
2. ì¿¨ë‹¤ìš´ íƒ€ì´ë¨¸ ì‘ë™ í™•ì¸
3. ì–‘ìª½ í¬í„¸ì— ìºë¦­í„° ì¶”ê°€ë˜ëŠ”ì§€ í™•ì¸

### í¬í„¸ ë·°ê°€ ê²€ì€ìƒ‰

1. Render Target í• ë‹¹ í™•ì¸
2. Scene Capture í™œì„±í™” í™•ì¸
3. Materialì˜ Emissive ì—°ê²° í™•ì¸

### ì†ë„ê°€ ìœ ì§€ë˜ì§€ ì•ŠìŒ

1. `bMaintainVelocity` ë³€ìˆ˜ í™•ì¸
2. Launch Character ë…¸ë“œ ì—°ê²° í™•ì¸
3. Transform Vector ê³„ì‚° í™•ì¸

## ë‹¤ìŒ ë‹¨ê³„

<Callout type="success" emoji="ğŸŒ€">
  í…”ë ˆí¬íŠ¸ í¬í„¸ ì‹œìŠ¤í…œì„ ì™„ì„±í–ˆìŠµë‹ˆë‹¤!
  ì´ì œ ë” ë³µì¡í•œ í¬í„¸ ë©”ì»¤ë‹ˆì¦˜ì„ ì¶”ê°€í•´ë´…ì‹œë‹¤.
</Callout>

ë‹¤ìŒì— ì‹œë„í•´ë³¼ ê¸°ëŠ¥ë“¤:
- ğŸ¨ ë‹¤ì–‘í•œ í¬í„¸ ì´í™íŠ¸
- ğŸ“ í¬í„¸ í¬ê¸° ë³€ê²½ ì‹œìŠ¤í…œ
- ğŸ”„ íšŒì „í•˜ëŠ” í¬í„¸
- ğŸ® í¬í„¸ê±´ ì•„ì´í…œ

[ì²´í¬í¬ì¸íŠ¸ ì‹œìŠ¤í…œìœ¼ë¡œ ê³„ì†í•˜ê¸° â†’](/unreal-engine-5/jump-map/checkpoint-system)