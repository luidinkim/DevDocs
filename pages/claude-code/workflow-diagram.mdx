import { Callout } from 'nextra/components'

# 🔄 Claude Code 워크플로우 다이어그램

## SuperClaude 전체 아키텍처

```
┌─────────────────────────────────────────────────────────────────┐
│                      SuperClaude 시스템 아키텍처                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                    │
│  ┌──────────────┐      ┌──────────────┐      ┌──────────────┐    │
│  │ 사용자 입력   │ ───▶ │ 오케스트레이터 │ ───▶ │   페르소나    │    │
│  │              │      │              │      │   (11개)     │    │
│  │ • sc: 명령어  │      │ • 명령어 파서 │      │ • Frontend   │    │
│  │ • 일반 명령어 │      │ • 컨텍스트    │      │ • Backend    │    │
│  └──────────────┘      │ • 복잡도 평가 │      │ • Security   │    │
│                        └──────────────┘      │ • Performance│    │
│                               │               │ • QA         │    │
│                               ▼               └──────────────┘    │
│                        ┌──────────────┐              │            │
│                        │ MCP 서버     │              ▼            │
│                        │              │       ┌──────────────┐    │
│                        │ • Sequential │ ────▶ │  실행 엔진    │    │
│                        │ • Context7   │       │              │    │
│                        │ • Magic      │       │ • 코드 생성   │    │
│                        │ • Playwright │       │ • 테스트      │    │
│                        └──────────────┘       │ • 문서화      │    │
│                                               └──────────────┘    │
│                                                      │            │
│                                                      ▼            │
│                                               ┌──────────────┐    │
│                                               │  결과 출력    │    │
│                                               └──────────────┘    │
└─────────────────────────────────────────────────────────────────┘
```

### 시스템 흐름

1. **입력 단계**: 사용자가 명령어 입력 (`sc:` 또는 일반 명령어)
2. **분석 단계**: 오케스트레이터가 명령 파싱 및 복잡도 평가
3. **활성화 단계**: 필요한 페르소나와 MCP 서버 자동 선택
4. **실행 단계**: 선택된 도구들이 협업하여 작업 수행
5. **출력 단계**: 결과 생성 및 사용자 전달

## 명령어 처리 플로우

### 처리 단계

1️⃣ **사용자 → Claude Code**: `sc:analyze` 명령어 입력

2️⃣ **복잡도 평가**: 작업의 복잡도를 0.0 ~ 1.0 스케일로 평가

3️⃣ **자동 활성화**:
   - 페르소나 선택 (Analyzer, Architect 등)
   - MCP 서버 연결 (Sequential, Context7 등)

4️⃣ **분석 실행**: 선택된 페르소나가 작업 수행

5️⃣ **도구 지원**: MCP 서버가 필요한 도구 제공

6️⃣ **결과 생성**: 분석 결과와 도구 지원 결합

7️⃣ **사용자 출력**: 최종 결과 전달

## 복잡도 기반 자동 활성화

```
                작업 입력
                    │
                    ▼
            ┌───────────────┐
            │ 복잡도 평가    │
            └───────────────┘
                    │
      ┌─────────────┼─────────────┐
      ▼             ▼             ▼
┌──────────┐  ┌──────────┐  ┌──────────┐
│ < 0.3    │  │ 0.3-0.7  │  │ > 0.7    │
│ 낮음 🟢   │  │ 중간 🔵   │  │ 높음 🔴   │
└──────────┘  └──────────┘  └──────────┘
      │             │             │
      ▼             ▼             ▼
┌──────────┐  ┌──────────┐  ┌──────────┐
│기본 실행  │  │페르소나   │  │Wave 모드 │
│단일 도구  │  │MCP 서버   │  │전체 시스템│
└──────────┘  └──────────┘  └──────────┘
```

### 복잡도 레벨 상세

| 레벨 | 복잡도 | 활성화 | 도구 |
|------|--------|--------|------|
| 🟢 **낮음** | < 0.3 | 기본 실행 | 단일 도구 |
| 🔵 **중간** | 0.3-0.7 | 페르소나 활성화 | MCP 서버 연결 |
| 🔴 **높음** | > 0.7 | Wave 모드 | 전체 시스템 활성화 |

<Callout type="info" emoji="💡">
복잡도가 0.7 이상이면 Wave 모드가 자동으로 활성화되어 여러 단계로 작업을 나누어 처리합니다.
</Callout>

## 페르소나 선택 매트릭스

### 도메인별 페르소나 매칭

| 도메인 | 페르소나 | 전문 영역 | 도구/프레임워크 |
|--------|----------|-----------|----------------|
| **UI/UX** | Frontend 🎨 | 사용자 인터페이스 | React, Vue, CSS |
| **서버** | Backend ⚙️ | 서버 로직 | Node.js, Python |
| **보안** | Security 🛡️ | 취약점 분석 | OWASP, 암호화 |
| **성능** | Performance ⚡ | 최적화 | 프로파일링, 캐싱 |
| **테스트** | QA 🧪 | 품질 보증 | E2E, 단위 테스트 |

## MCP 서버 협업

### 4개 서버의 역할

#### 🔄 Sequential
- **역할**: 체계적 사고와 문제 분해
- **활용**: 복잡한 문제를 단계별로 분석

#### 📚 Context7
- **역할**: 문서 검색과 패턴 찾기
- **활용**: 라이브러리 문서, 베스트 프랙티스

#### ✨ Magic
- **역할**: UI 컴포넌트 생성
- **활용**: React/Vue 컴포넌트, 디자인 시스템

#### 🎬 Playwright
- **역할**: 브라우저 테스트
- **활용**: E2E 테스트, 성능 측정

### 협업 플로우
**Sequential** → **Context7** → **Magic** → **Playwright** → **완료**

## Wave 모드 실행 패턴

### 4단계 Wave 프로세스

#### 🌊 Wave 1: 분석
- 현재 상태 파악
- 문제점 식별
- 요구사항 정리

#### 🌊 Wave 2: 설계
- 솔루션 설계
- 계획 수립
- 리소스 할당

#### 🌊 Wave 3: 구현
- 코드 작성
- 기능 구현
- 테스트 작성

#### 🌊 Wave 4: 검증
- 품질 검증
- 성능 최적화
- 최종 확인

<Callout type="success" emoji="✅">
각 Wave는 이전 단계의 결과를 기반으로 점진적으로 개선됩니다.
</Callout>

<Callout type="info" emoji="💡">
이 다이어그램들은 Claude Code와 SuperClaude의 내부 작동 방식을 보여줍니다.
각 단계별로 어떤 컴포넌트가 활성화되고 어떻게 협업하는지 이해할 수 있습니다.
</Callout>

## 주요 개념 설명

### 🎯 페르소나 시스템
- **11개의 전문가 AI**: 각 도메인별 전문 지식 보유
- **자동 활성화**: 작업 유형에 따라 자동으로 선택
- **협업 모드**: 여러 페르소나가 함께 작동

### 🖥️ MCP 서버
- **Sequential**: 체계적 사고와 분석
- **Context7**: 문서와 패턴 검색
- **Magic**: UI 컴포넌트 생성
- **Playwright**: 브라우저 테스트

### 🌊 Wave 모드
- **복잡도 0.7 이상**시 자동 활성화
- **단계별 실행**: 분석 → 설계 → 구현 → 검증
- **점진적 개선**: 각 Wave가 이전 결과를 개선

### 💬 명령어 체계
- **sc:analyze**: 코드 분석 (--think 플래그로 깊이 조절)
- **sc:build**: 프로젝트 구축
- **sc:improve**: 코드 개선
- **sc:test**: 테스트 실행