import { Tabs, Callout, Cards } from 'nextra/components'

# 📊 문서용 다이어그램 도구 비교

<Callout type="info" emoji="💡">
Mermaid 외에도 MDX/Nextra에서 사용할 수 있는 훌륭한 시각화 도구들이 많습니다!
</Callout>

## 🎨 주요 대안들

<Cards>
  <Cards.Card 
    title="Excalidraw ✏️"
  >
    **손그림 스타일의 협업 다이어그램**
    - 친근하고 부담없는 스케치 스타일
    - 실시간 협업 지원
    - Mermaid → Excalidraw 변환 가능
  </Cards.Card>
  
  <Cards.Card 
    title="D2 (Declarative Diagramming) 🔷"
  >
    **선언적 다이어그램 언어**
    - 서버사이드 렌더링
    - 브라우저 의존성 없음
    - 빠른 SVG 생성
  </Cards.Card>
  
  <Cards.Card 
    title="Markmap 🧠"
  >
    **마크다운 → 마인드맵**
    - 자동 마인드맵 생성
    - 인터랙티브 확장/축소
    - 마크다운 문법 그대로 사용
  </Cards.Card>
  
  <Cards.Card 
    title="PlantUML 🌱"
  >
    **엔터프라이즈급 다이어그램**
    - UML 다이어그램 전문
    - 복잡한 시스템 설계
    - 다양한 다이어그램 타입
  </Cards.Card>
</Cards>

## 🆚 도구별 비교

<Tabs items={['Excalidraw', 'D2', 'Markmap', 'PlantUML', 'ASCII Art']}>
  <Tabs.Tab>
    ### ✏️ Excalidraw
    
    **장점:**
    - 🎨 손그림 스타일로 친근함
    - 👥 실시간 협업 가능
    - 🔄 Mermaid 변환 지원
    - 📱 모바일 친화적
    
    **단점:**
    - 텍스트 기반이 아님
    - 버전 관리 어려움
    - 외부 서비스 의존
    
    **설치 방법:**
    ```bash
    npm install @excalidraw/excalidraw
    ```
    
    **MDX 사용 예시:**
    ```jsx
    import { Excalidraw } from "@excalidraw/excalidraw"
    
    <Excalidraw 
      initialData={{
        elements: [...],
        appState: { viewBackgroundColor: "#ffffff" }
      }}
    />
    ```
    
    **추천 사용 케이스:**
    - 브레인스토밍
    - 아이디어 스케치
    - 사용자 흐름도
    - 와이어프레임
  </Tabs.Tab>
  
  <Tabs.Tab>
    ### 🔷 D2 (Declarative Diagramming)
    
    **장점:**
    - ⚡ 빠른 렌더링
    - 🖥️ 서버사이드 처리
    - 📝 텍스트 기반
    - 🎯 깔끔한 레이아웃
    
    **단점:**
    - 학습 곡선 존재
    - 커뮤니티 작음
    - 플러그인 적음
    
    **설치 방법:**
    ```bash
    # Mac
    brew install d2
    
    # Windows
    scoop install d2
    ```
    
    **D2 문법 예시:**
    ```d2
    # 아키텍처 다이어그램
    users -> webapp: HTTP
    webapp -> database: SQL
    
    webapp: {
      shape: rectangle
      style.fill: "#667eea"
    }
    
    database: {
      shape: cylinder
      style.fill: "#48bb78"
    }
    ```
    
    **MDX 통합:**
    ```jsx
    import D2Diagram from '../components/D2Diagram'
    
    <D2Diagram code={`
      direction: right
      
      user -> api -> db
    `} />
    ```
  </Tabs.Tab>
  
  <Tabs.Tab>
    ### 🧠 Markmap
    
    **장점:**
    - 📝 마크다운 문법 그대로
    - 🔄 자동 마인드맵 변환
    - 🎯 인터랙티브
    - 📊 계층 구조 시각화
    
    **단점:**
    - 마인드맵만 지원
    - 커스터마이징 제한
    - 복잡한 관계 표현 어려움
    
    **설치 방법:**
    ```bash
    npm install markmap-lib markmap-view
    ```
    
    **마크다운 → 마인드맵:**
    ```markdown
    # 프로젝트 구조
    ## Frontend
    ### React
    - Components
    - Hooks
    - Context
    ### Vue
    - Components
    - Composables
    ## Backend
    ### Node.js
    - Express
    - Fastify
    ### Python
    - Django
    - FastAPI
    ```
    
    **MDX 컴포넌트:**
    ```jsx
    import { Markmap } from '../components/Markmap'
    
    <Markmap markdown={`
    # SuperClaude
    ## 페르소나
    ### Frontend
    ### Backend
    ## MCP 서버
    ### Sequential
    ### Context7
    `} />
    ```
  </Tabs.Tab>
  
  <Tabs.Tab>
    ### 🌱 PlantUML
    
    **장점:**
    - 📐 정확한 UML 표준
    - 🔧 다양한 다이어그램
    - 📚 풍부한 문서
    - 🏢 엔터프라이즈 지원
    
    **단점:**
    - Java 의존성
    - 문법 복잡
    - 스타일링 제한
    
    **설치 방법:**
    ```bash
    npm install plantuml
    # Java 필요
    ```
    
    **PlantUML 예시:**
    ```plantuml
    @startuml
    !theme blueprint
    
    actor User
    participant "Web App" as Web
    database "Database" as DB
    
    User -> Web: Request
    Web -> DB: Query
    DB --> Web: Results
    Web --> User: Response
    @enduml
    ```
    
    **추천 사용 케이스:**
    - 시퀀스 다이어그램
    - 클래스 다이어그램
    - 컴포넌트 다이어그램
    - 상태 다이어그램
  </Tabs.Tab>
  
  <Tabs.Tab>
    ### 📐 ASCII Art 다이어그램
    
    **장점:**
    - 🚀 의존성 없음
    - 📝 순수 텍스트
    - 🔄 버전 관리 완벽
    - ⚡ 즉시 렌더링
    
    **단점:**
    - 제작 시간 오래 걸림
    - 수정 어려움
    - 인터랙션 없음
    
    **도구들:**
    - [asciiflow.com](https://asciiflow.com)
    - [monodraw.helftone.com](https://monodraw.helftone.com)
    - [textik.com](https://textik.com)
    
    **ASCII 예시:**
    ```
    ┌─────────────┐     ┌─────────────┐
    │   Browser   │────▶│   Server    │
    └─────────────┘     └─────────────┘
          │                   │
          │                   ▼
          │            ┌─────────────┐
          └───────────▶│  Database   │
                       └─────────────┘
    ```
    
    **Tree 구조:**
    ```
    SuperClaude/
    ├── 페르소나/
    │   ├── Frontend
    │   ├── Backend
    │   └── Security
    ├── MCP 서버/
    │   ├── Sequential
    │   ├── Context7
    │   └── Magic
    └── 실행 엔진/
        ├── 코드 생성
        └── 테스트
    ```
  </Tabs.Tab>
</Tabs>

## 🎯 선택 가이드

<Cards>
  <Cards.Card title="간단한 플로우차트 📊">
    **추천:** ASCII Art 또는 Markmap
    - 빠른 작성
    - 버전 관리 용이
  </Cards.Card>
  
  <Cards.Card title="복잡한 시스템 설계 🏗️">
    **추천:** D2 또는 PlantUML
    - 정확한 표현
    - 전문적인 결과물
  </Cards.Card>
  
  <Cards.Card title="협업 필요 👥">
    **추천:** Excalidraw
    - 실시간 공동 작업
    - 쉬운 수정
  </Cards.Card>
  
  <Cards.Card title="문서 통합 📚">
    **추천:** D2 또는 Markmap
    - MDX 친화적
    - 자동 렌더링
  </Cards.Card>
</Cards>

## 💻 실제 구현 예시

### D2 Wrapper 컴포넌트

```tsx filename="components/D2Diagram.tsx"
import { useEffect, useRef, useState } from 'react'

export default function D2Diagram({ code, theme = 'default' }) {
  const containerRef = useRef<HTMLDivElement>(null)
  const [svg, setSvg] = useState<string>('')

  useEffect(() => {
    // D2 CLI를 통해 SVG 생성 (서버사이드)
    fetch('/api/d2-render', {
      method: 'POST',
      body: JSON.stringify({ code, theme })
    })
      .then(res => res.text())
      .then(setSvg)
  }, [code, theme])

  return (
    <div 
      ref={containerRef}
      className="d2-diagram"
      dangerouslySetInnerHTML={{ __html: svg }}
    />
  )
}
```

### Markmap Wrapper 컴포넌트

```tsx filename="components/Markmap.tsx"
import { useEffect, useRef } from 'react'
import { Markmap as MarkmapLib } from 'markmap-view'
import { Transformer } from 'markmap-lib'

export default function Markmap({ markdown }) {
  const svgRef = useRef<SVGSVGElement>(null)
  
  useEffect(() => {
    if (!svgRef.current) return
    
    const transformer = new Transformer()
    const { root } = transformer.transform(markdown)
    
    MarkmapLib.create(svgRef.current, {}, root)
  }, [markdown])
  
  return <svg ref={svgRef} style={{ width: '100%', height: '500px' }} />
}
```

## 🚀 추천 조합

<Callout type="success" emoji="✨">
**최적의 조합:**
1. **D2**: 아키텍처, 플로우차트
2. **Markmap**: 계층 구조, 마인드맵
3. **Excalidraw**: 스케치, 브레인스토밍
4. **ASCII**: 간단한 다이어그램, README
</Callout>

## 📦 올인원 솔루션

```bash
# 추천 패키지 설치
npm install @excalidraw/excalidraw markmap-lib markmap-view

# D2는 시스템에 설치
brew install d2  # Mac
scoop install d2 # Windows
```

<Callout type="warning" emoji="⚠️">
**주의사항:** PlantUML은 Java가 필요하므로 Docker 사용을 권장합니다.
</Callout>